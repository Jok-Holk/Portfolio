---
import Layout from '../../../layouts/blogLayout.astro';
import fetchApi from '../../../lib/strapi';
import type Article from '../../../interfaces/article';
import BlogListWithSearch from '../../../components/BlogListWithSearch.vue';

import { getTranslations } from '../../../locales';
export async function getStaticPaths() {
    return [{ params: { lang: 'en' } }, { params: { lang: 'vi' } }];
}
const { lang } = Astro.params;
const translations = await getTranslations(lang);
const articles = await fetchApi<Article[]>({
    endpoint: `articles?populate=*&locale=${lang}`,
    wrappedByKey: 'data',
});

const strapiUrl = import.meta.env.STRAPI_URL;
---

<Layout title={translations?.titleBlog}>
    <section
        class="container px-4 sm:px-6 md:px-8 lg:px-16 xl:px-32 mx-auto my-16 sm:my-20 md:my-24 lg:my-32 text-gray-300 font-mono min-h-screen"
    >
        <div class="animate-fade-in-left mb-8 md:mb-12">
            <a
                href={`/${lang}/`}
                class="group inline-flex items-center gap-2 sm:gap-3 text-base sm:text-lg text-purple-400 font-mono transition-all duration-300 hover:text-purple-300 hover:scale-105"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="w-5 h-5 sm:w-6 sm:h-6 transition-all duration-300 group-hover:-translate-x-2 group-hover:scale-110"
                >
                    <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"></path>
                </svg>
                <span class="underline-on-hover"> {translations?.blogContent?.goback}</span>
            </a>
        </div>

        <!-- Page Title with Animation -->
        <div class="animate-fade-in-up mb-8 md:mb-12">
            <h1 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-4 md:mb-6 leading-tight">
                {translations?.blogContent?.myJournals}
            </h1>
            <div
                class="h-1 w-20 sm:w-24 md:w-32 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full animate-gradient"
            >
            </div>
        </div>

        <!-- Blog List Component -->
        <div class="animate-fade-in-up opacity-0" style="animation-delay: 300ms; animation-fill-mode: forwards;">
            <BlogListWithSearch
                articles={articles}
                translations={translations}
                lang={lang}
                strapiUrl={strapiUrl}
                client:visible
            />
        </div>
    </section>
</Layout>

<style>
    @keyframes fade-in-up {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes fade-in-left {
        from {
            opacity: 0;
            transform: translateX(-30px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    @keyframes gradient {
        0% {
            transform: scaleX(0);
        }
        100% {
            transform: scaleX(1);
        }
    }

    .animate-fade-in-up {
        animation: fade-in-up 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .animate-fade-in-left {
        animation: fade-in-left 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .animate-gradient {
        animation: gradient 1s ease-out 0.5s forwards;
        transform: scaleX(0);
        transform-origin: left;
    }

    .underline-on-hover {
        position: relative;
        display: inline-block;
    }

    .underline-on-hover::after {
        content: '';
        position: absolute;
        width: 100%;
        height: 2px;
        bottom: -2px;
        left: 0;
        background: linear-gradient(90deg, #8b5cf6, #a855f7);
        transform: scaleX(0);
        transform-origin: bottom left;
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        border-radius: 1px;
    }

    .group:hover .underline-on-hover::after {
        transform: scaleX(1);
    }

    /* Responsive typography adjustments */
    @media (max-width: 640px) {
        h1 {
            line-height: 1.2;
        }
    }

    /* Smooth scroll behavior */
    html {
        scroll-behavior: smooth;
    }
</style>
